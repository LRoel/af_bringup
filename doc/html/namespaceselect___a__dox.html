<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>af_bringup: select_A_dox Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">af_bringup
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">select_A_dox Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classselect___a__dox_1_1_a_m_c_l__unit.html">AMCL_unit</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">AMCL存储类  <a href="classselect___a__dox_1_1_a_m_c_l__unit.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classselect___a__dox_1_1_g_p_s__unit.html">GPS_unit</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">GPS数据存储类  <a href="classselect___a__dox_1_1_g_p_s__unit.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classselect___a__dox_1_1_odom__unit.html">Odom_unit</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">里程计数据存储类  <a href="classselect___a__dox_1_1_odom__unit.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classselect___a__dox_1_1_s_e_l_e_c_t_e_d.html">SELECTED</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">筛选结果类  <a href="classselect___a__dox_1_1_s_e_l_e_c_t_e_d.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a933f572519bc5396421db86a68a37916"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceselect___a__dox.html#a933f572519bc5396421db86a68a37916">normalize</a> (z)</td></tr>
<tr class="memdesc:a933f572519bc5396421db86a68a37916"><td class="mdescLeft">&#160;</td><td class="mdescRight">归一化  <a href="#a933f572519bc5396421db86a68a37916">More...</a><br /></td></tr>
<tr class="separator:a933f572519bc5396421db86a68a37916"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e96d33700cc43f6769c8717a1538684"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceselect___a__dox.html#a2e96d33700cc43f6769c8717a1538684">angle_diff</a> (a, b)</td></tr>
<tr class="memdesc:a2e96d33700cc43f6769c8717a1538684"><td class="mdescLeft">&#160;</td><td class="mdescRight">角度差值  <a href="#a2e96d33700cc43f6769c8717a1538684">More...</a><br /></td></tr>
<tr class="separator:a2e96d33700cc43f6769c8717a1538684"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb9ae60d7e093e9212176c74ab48f697"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceselect___a__dox.html#aeb9ae60d7e093e9212176c74ab48f697">matrix_from_theta</a> (theta)</td></tr>
<tr class="memdesc:aeb9ae60d7e093e9212176c74ab48f697"><td class="mdescLeft">&#160;</td><td class="mdescRight">角度生成旋转矩阵(2x2)  <a href="#aeb9ae60d7e093e9212176c74ab48f697">More...</a><br /></td></tr>
<tr class="separator:aeb9ae60d7e093e9212176c74ab48f697"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b416b405b394ffdf3fb7ca9d91bd896"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceselect___a__dox.html#a7b416b405b394ffdf3fb7ca9d91bd896">theta_from_matrix</a> (R)</td></tr>
<tr class="memdesc:a7b416b405b394ffdf3fb7ca9d91bd896"><td class="mdescLeft">&#160;</td><td class="mdescRight">旋转矩阵(2x2)转成角度  <a href="#a7b416b405b394ffdf3fb7ca9d91bd896">More...</a><br /></td></tr>
<tr class="separator:a7b416b405b394ffdf3fb7ca9d91bd896"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b1af471c24514010bab83a744995d30"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceselect___a__dox.html#a6b1af471c24514010bab83a744995d30">sendTransform</a> (out_pose)</td></tr>
<tr class="memdesc:a6b1af471c24514010bab83a744995d30"><td class="mdescLeft">&#160;</td><td class="mdescRight">发送TF(topic)  <a href="#a6b1af471c24514010bab83a744995d30">More...</a><br /></td></tr>
<tr class="separator:a6b1af471c24514010bab83a744995d30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac19f6260515ad57d2a375614405ec33d"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceselect___a__dox.html#ac19f6260515ad57d2a375614405ec33d">tran_mat44</a> (trans)</td></tr>
<tr class="memdesc:ac19f6260515ad57d2a375614405ec33d"><td class="mdescLeft">&#160;</td><td class="mdescRight">将ros格式中的Transform数据转为矩阵(4X4)  <a href="#ac19f6260515ad57d2a375614405ec33d">More...</a><br /></td></tr>
<tr class="separator:ac19f6260515ad57d2a375614405ec33d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62a8e3ea1a92df75e0ca42190f621777"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceselect___a__dox.html#a62a8e3ea1a92df75e0ca42190f621777">tran_theta_T</a> (trans)</td></tr>
<tr class="memdesc:a62a8e3ea1a92df75e0ca42190f621777"><td class="mdescLeft">&#160;</td><td class="mdescRight">将ros格式中的Transform数据转为矩阵(2X2)  <a href="#a62a8e3ea1a92df75e0ca42190f621777">More...</a><br /></td></tr>
<tr class="separator:a62a8e3ea1a92df75e0ca42190f621777"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a0029d6640915baf31f3cb76c0658ab"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceselect___a__dox.html#a0a0029d6640915baf31f3cb76c0658ab">make_choice</a> ()</td></tr>
<tr class="memdesc:a0a0029d6640915baf31f3cb76c0658ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">筛选函数  <a href="#a0a0029d6640915baf31f3cb76c0658ab">More...</a><br /></td></tr>
<tr class="separator:a0a0029d6640915baf31f3cb76c0658ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaae6f4a3d568931c6038b1e3cbfb6f9a"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceselect___a__dox.html#aaae6f4a3d568931c6038b1e3cbfb6f9a">amcl_initial_update</a> (x_std=1, y_std=1, theta_std=1)</td></tr>
<tr class="memdesc:aaae6f4a3d568931c6038b1e3cbfb6f9a"><td class="mdescLeft">&#160;</td><td class="mdescRight">AMCL初始化函数  <a href="#aaae6f4a3d568931c6038b1e3cbfb6f9a">More...</a><br /></td></tr>
<tr class="separator:aaae6f4a3d568931c6038b1e3cbfb6f9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a843ff715ed42a01fc98f2199ea314cea"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceselect___a__dox.html#a843ff715ed42a01fc98f2199ea314cea">amcl_initial_callback</a> (msg)</td></tr>
<tr class="memdesc:a843ff715ed42a01fc98f2199ea314cea"><td class="mdescLeft">&#160;</td><td class="mdescRight">AMCL 初始化回调函数  <a href="#a843ff715ed42a01fc98f2199ea314cea">More...</a><br /></td></tr>
<tr class="separator:a843ff715ed42a01fc98f2199ea314cea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c38eb63cc34fdb7d60461a006f34100"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceselect___a__dox.html#a4c38eb63cc34fdb7d60461a006f34100">amcl_global_update</a> ()</td></tr>
<tr class="memdesc:a4c38eb63cc34fdb7d60461a006f34100"><td class="mdescLeft">&#160;</td><td class="mdescRight">AMCL全局撒粒子  <a href="#a4c38eb63cc34fdb7d60461a006f34100">More...</a><br /></td></tr>
<tr class="separator:a4c38eb63cc34fdb7d60461a006f34100"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c4df087055bbe2cb5ce63c92a51d493"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceselect___a__dox.html#a1c4df087055bbe2cb5ce63c92a51d493">amcl_nomotion_update</a> ()</td></tr>
<tr class="memdesc:a1c4df087055bbe2cb5ce63c92a51d493"><td class="mdescLeft">&#160;</td><td class="mdescRight">AMCL未运动状态下粒子更新  <a href="#a1c4df087055bbe2cb5ce63c92a51d493">More...</a><br /></td></tr>
<tr class="separator:a1c4df087055bbe2cb5ce63c92a51d493"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37dfe6ff00e8834a1d53c1612354758c"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceselect___a__dox.html#a37dfe6ff00e8834a1d53c1612354758c">amcl_recovery</a> ()</td></tr>
<tr class="memdesc:a37dfe6ff00e8834a1d53c1612354758c"><td class="mdescLeft">&#160;</td><td class="mdescRight">AMCL恢复状态过程  <a href="#a37dfe6ff00e8834a1d53c1612354758c">More...</a><br /></td></tr>
<tr class="separator:a37dfe6ff00e8834a1d53c1612354758c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd73791153a71f1fcddb1b58d87fcf6e"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceselect___a__dox.html#afd73791153a71f1fcddb1b58d87fcf6e">amcl_process</a> ()</td></tr>
<tr class="memdesc:afd73791153a71f1fcddb1b58d87fcf6e"><td class="mdescLeft">&#160;</td><td class="mdescRight">AMCL线程  <a href="#afd73791153a71f1fcddb1b58d87fcf6e">More...</a><br /></td></tr>
<tr class="separator:afd73791153a71f1fcddb1b58d87fcf6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b1a91ee1ddc60fac7981f8cb5ea0368"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceselect___a__dox.html#a3b1a91ee1ddc60fac7981f8cb5ea0368">main</a> ()</td></tr>
<tr class="memdesc:a3b1a91ee1ddc60fac7981f8cb5ea0368"><td class="mdescLeft">&#160;</td><td class="mdescRight">主函数  <a href="#a3b1a91ee1ddc60fac7981f8cb5ea0368">More...</a><br /></td></tr>
<tr class="separator:a3b1a91ee1ddc60fac7981f8cb5ea0368"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ae625bd87a3d659c478623a68cd8419a0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceselect___a__dox.html#ae625bd87a3d659c478623a68cd8419a0">MAX_STD</a> = 999999999</td></tr>
<tr class="memdesc:ae625bd87a3d659c478623a68cd8419a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">最大的标准差  <a href="#ae625bd87a3d659c478623a68cd8419a0">More...</a><br /></td></tr>
<tr class="separator:ae625bd87a3d659c478623a68cd8419a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab650782f9bf9e653748df1ce43ba0a3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceselect___a__dox.html#aab650782f9bf9e653748df1ce43ba0a3">flag_robot_move</a> = 0</td></tr>
<tr class="memdesc:aab650782f9bf9e653748df1ce43ba0a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">机器人是否运动标志  <a href="#aab650782f9bf9e653748df1ce43ba0a3">More...</a><br /></td></tr>
<tr class="separator:aab650782f9bf9e653748df1ce43ba0a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fedd571655449b271f61079a0c85510"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceselect___a__dox.html#a0fedd571655449b271f61079a0c85510">STATIC_LIMIT_LINEAR</a> = 0.05</td></tr>
<tr class="memdesc:a0fedd571655449b271f61079a0c85510"><td class="mdescLeft">&#160;</td><td class="mdescRight">判断机器人是否运动的速度限制  <a href="#a0fedd571655449b271f61079a0c85510">More...</a><br /></td></tr>
<tr class="separator:a0fedd571655449b271f61079a0c85510"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c2c2dd96dd9f11315bf9092c248b7f6"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceselect___a__dox.html#a8c2c2dd96dd9f11315bf9092c248b7f6">STATIC_LIMIT_ANGULAR</a> = 0.05</td></tr>
<tr class="memdesc:a8c2c2dd96dd9f11315bf9092c248b7f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">判断机器人是否运动的角度限制  <a href="#a8c2c2dd96dd9f11315bf9092c248b7f6">More...</a><br /></td></tr>
<tr class="separator:a8c2c2dd96dd9f11315bf9092c248b7f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a4c38eb63cc34fdb7d60461a006f34100"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c38eb63cc34fdb7d60461a006f34100">&#9670;&nbsp;</a></span>amcl_global_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def select_A_dox.amcl_global_update </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>AMCL全局撒粒子 </p>
<div class="fragment"><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="keyword">def </span><a class="code" href="namespaceselect___a__dox.html#a4c38eb63cc34fdb7d60461a006f34100">amcl_global_update</a>():</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    rospy.wait_for_service(<span class="stringliteral">&#39;global_localization&#39;</span>)</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <span class="keywordflow">try</span>:</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        global_update = rospy.ServiceProxy(<span class="stringliteral">&#39;global_localization&#39;</span>, Empty)</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        global_update()</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="keywordflow">except</span> rospy.ServiceException, e:</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        <span class="keywordflow">print</span> <span class="stringliteral">&quot;Service call failed: %s&quot;</span> % e</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div><div class="ttc" id="namespaceselect___a__dox_html_a4c38eb63cc34fdb7d60461a006f34100"><div class="ttname"><a href="namespaceselect___a__dox.html#a4c38eb63cc34fdb7d60461a006f34100">select_A_dox.amcl_global_update</a></div><div class="ttdeci">def amcl_global_update()</div><div class="ttdoc">AMCL全局撒粒子 </div><div class="ttdef"><b>Definition:</b> select_A_dox.py:555</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a843ff715ed42a01fc98f2199ea314cea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a843ff715ed42a01fc98f2199ea314cea">&#9670;&nbsp;</a></span>amcl_initial_callback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def select_A_dox.amcl_initial_callback </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>AMCL 初始化回调函数 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>ros回调数据 </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="keyword">def </span><a class="code" href="namespaceselect___a__dox.html#a843ff715ed42a01fc98f2199ea314cea">amcl_initial_callback</a>(msg):</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="comment"># msg = PoseWithCovarianceStamped()</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keyword">global</span> amcl_output</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="keywordflow">print</span> <span class="stringliteral">&quot;  &quot;</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="comment"># amcl_output.x = msg.pose.pose.position.x</span></div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <span class="comment"># amcl_output.y = msg.pose.pose.position.y</span></div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="comment"># _quat = [msg.pose.pose.orientation.x, msg.pose.pose.orientation.y,</span></div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="comment">#          msg.pose.pose.orientation.z,</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <span class="comment">#          msg.pose.pose.orientation.w]</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <span class="comment"># amcl_output.theta = tft.euler_from_quaternion(_quat)[2]</span></div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;</div><div class="ttc" id="namespaceselect___a__dox_html_a843ff715ed42a01fc98f2199ea314cea"><div class="ttname"><a href="namespaceselect___a__dox.html#a843ff715ed42a01fc98f2199ea314cea">select_A_dox.amcl_initial_callback</a></div><div class="ttdeci">def amcl_initial_callback(msg)</div><div class="ttdoc">AMCL 初始化回调函数 </div><div class="ttdef"><b>Definition:</b> select_A_dox.py:541</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaae6f4a3d568931c6038b1e3cbfb6f9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaae6f4a3d568931c6038b1e3cbfb6f9a">&#9670;&nbsp;</a></span>amcl_initial_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def select_A_dox.amcl_initial_update </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>x_std</em> = <code>1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_std</em> = <code>1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>theta_std</em> = <code>1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>AMCL初始化函数 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x_std</td><td>x方向方差 </td></tr>
    <tr><td class="paramname">y_std</td><td>y方向方差 </td></tr>
    <tr><td class="paramname">theta_std</td><td>角度房车 </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="keyword">def </span><a class="code" href="namespaceselect___a__dox.html#aaae6f4a3d568931c6038b1e3cbfb6f9a">amcl_initial_update</a>(x_std=1, y_std=1, theta_std=1):</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    rate = rospy.Rate(10)</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="keywordflow">while</span> <span class="keywordflow">not</span> rospy.is_shutdown():</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        <span class="keywordflow">try</span>:</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;            trans = tfBuffer.lookup_transform(<span class="stringliteral">&#39;map&#39;</span>, <span class="stringliteral">&#39;base_footprint&#39;</span>, rospy.Time())</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        <span class="keywordflow">except</span> (tf2_ros.LookupException, tf2_ros.ConnectivityException, tf2_ros.ExtrapolationException):</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;            rate.sleep()</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            <span class="keywordflow">continue</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        <span class="keyword">global</span> pub_amcl</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        amcl_init_pose.header.stamp = rospy.Time.now()</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        amcl_init_pose.header.frame_id = <span class="stringliteral">&quot;map&quot;</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        amcl_init_pose.pose.pose.position.x = trans.transform.translation.x</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        amcl_init_pose.pose.pose.position.y = trans.transform.translation.y</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        amcl_init_pose.pose.pose.position.z = trans.transform.translation.z</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        amcl_init_pose.pose.pose.orientation.x = trans.transform.rotation.x</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        amcl_init_pose.pose.pose.orientation.y = trans.transform.rotation.y</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        amcl_init_pose.pose.pose.orientation.z = trans.transform.rotation.z</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        amcl_init_pose.pose.pose.orientation.w = trans.transform.rotation.w</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        amcl_init_pose.pose.covariance = [0.0] * 36</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        amcl_init_pose.pose.covariance[0] = x_std ** 2</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        amcl_init_pose.pose.covariance[7] = y_std ** 2</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        amcl_init_pose.pose.covariance[35] = theta_std ** 2</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        pub_amcl.publish(amcl_init_pose)</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        <span class="keywordflow">break</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        <span class="comment"># print &quot;pub amcl ok&quot; + str(input_yaw)</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;</div><div class="ttc" id="namespaceselect___a__dox_html_aaae6f4a3d568931c6038b1e3cbfb6f9a"><div class="ttname"><a href="namespaceselect___a__dox.html#aaae6f4a3d568931c6038b1e3cbfb6f9a">select_A_dox.amcl_initial_update</a></div><div class="ttdeci">def amcl_initial_update(x_std=1, y_std=1, theta_std=1)</div><div class="ttdoc">AMCL初始化函数 </div><div class="ttdef"><b>Definition:</b> select_A_dox.py:506</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1c4df087055bbe2cb5ce63c92a51d493"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c4df087055bbe2cb5ce63c92a51d493">&#9670;&nbsp;</a></span>amcl_nomotion_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def select_A_dox.amcl_nomotion_update </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>AMCL未运动状态下粒子更新 </p>
<div class="fragment"><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="keyword">def </span><a class="code" href="namespaceselect___a__dox.html#a1c4df087055bbe2cb5ce63c92a51d493">amcl_nomotion_update</a>():</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    rospy.wait_for_service(<span class="stringliteral">&#39;request_nomotion_update&#39;</span>)</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <span class="keywordflow">try</span>:</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        nomotion_update = rospy.ServiceProxy(<span class="stringliteral">&#39;request_nomotion_update&#39;</span>, Empty)</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        nomotion_update()</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <span class="keywordflow">except</span> rospy.ServiceException, e:</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        <span class="keywordflow">print</span> <span class="stringliteral">&quot;Service call failed: %s&quot;</span> % e</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div><div class="ttc" id="namespaceselect___a__dox_html_a1c4df087055bbe2cb5ce63c92a51d493"><div class="ttname"><a href="namespaceselect___a__dox.html#a1c4df087055bbe2cb5ce63c92a51d493">select_A_dox.amcl_nomotion_update</a></div><div class="ttdeci">def amcl_nomotion_update()</div><div class="ttdoc">AMCL未运动状态下粒子更新 </div><div class="ttdef"><b>Definition:</b> select_A_dox.py:565</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afd73791153a71f1fcddb1b58d87fcf6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd73791153a71f1fcddb1b58d87fcf6e">&#9670;&nbsp;</a></span>amcl_process()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def select_A_dox.amcl_process </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>AMCL线程 </p>
<p>包括AMCL位置纠正,AMCL位置正确度判断和AMCL自恢复 </p>
<div class="fragment"><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="keyword">def </span><a class="code" href="namespaceselect___a__dox.html#afd73791153a71f1fcddb1b58d87fcf6e">amcl_process</a>():</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="keyword">global</span> amcl_output</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="keywordflow">while</span> <span class="keywordflow">not</span> rospy.is_shutdown():</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        <span class="keywordflow">if</span> <a class="code" href="namespaceselect___a__dox.html#a37dfe6ff00e8834a1d53c1612354758c">amcl_recovery</a>():</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;            <span class="keywordflow">print</span> <span class="stringliteral">&quot;ok&quot;</span></div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;            <span class="keywordflow">break</span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <span class="keywordflow">while</span> <span class="keywordflow">not</span> rospy.is_shutdown():</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        <span class="keywordflow">if</span> amcl_pose.x_std &gt; 0.5 <span class="keywordflow">or</span> amcl_pose.y_std &gt; 0.5:</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;            rospy.wait_for_message(<span class="stringliteral">&#39;/scan&#39;</span>, LaserScan)</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;            n = 0</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;            <span class="keywordflow">while</span> <span class="keywordflow">not</span> rospy.is_shutdown():</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                <span class="keywordflow">if</span> n &lt;= 4:</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                    <a class="code" href="namespaceselect___a__dox.html#aaae6f4a3d568931c6038b1e3cbfb6f9a">amcl_initial_update</a>()</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                    <span class="keywordflow">print</span> <span class="stringliteral">&quot;amcl_initial&quot;</span></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                <span class="keywordflow">else</span>:</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                    <span class="keywordflow">if</span> (n - 5) % 5 == 0:</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                        <a class="code" href="namespaceselect___a__dox.html#a4c38eb63cc34fdb7d60461a006f34100">amcl_global_update</a>()</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                        <span class="keywordflow">print</span> <span class="stringliteral">&quot;amcl_global&quot;</span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                n += 1</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                <span class="keywordflow">if</span> <a class="code" href="namespaceselect___a__dox.html#a37dfe6ff00e8834a1d53c1612354758c">amcl_recovery</a>():</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                    <span class="keywordflow">print</span> <span class="stringliteral">&quot;recovery ok&quot;</span></div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                    amcl_output.x = amcl_pose.x</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                    amcl_output.y = amcl_pose.y</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                    amcl_output.theta = amcl_pose.theta</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                    <span class="keywordflow">break</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;            <span class="keywordflow">print</span> <span class="stringliteral">&#39;!!!!!!!!!!!!!!!!!!!!&#39;</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        <span class="keywordflow">else</span>:</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;            amcl_output.x = amcl_pose.x</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;            amcl_output.y = amcl_pose.y</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;            amcl_output.theta = amcl_pose.theta</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;            <span class="keywordflow">print</span> amcl_pose.x_std, amcl_pose.y_std</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;            <span class="comment"># print &quot;amcl_ok&quot;</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;</div><div class="ttc" id="namespaceselect___a__dox_html_a4c38eb63cc34fdb7d60461a006f34100"><div class="ttname"><a href="namespaceselect___a__dox.html#a4c38eb63cc34fdb7d60461a006f34100">select_A_dox.amcl_global_update</a></div><div class="ttdeci">def amcl_global_update()</div><div class="ttdoc">AMCL全局撒粒子 </div><div class="ttdef"><b>Definition:</b> select_A_dox.py:555</div></div>
<div class="ttc" id="namespaceselect___a__dox_html_aaae6f4a3d568931c6038b1e3cbfb6f9a"><div class="ttname"><a href="namespaceselect___a__dox.html#aaae6f4a3d568931c6038b1e3cbfb6f9a">select_A_dox.amcl_initial_update</a></div><div class="ttdeci">def amcl_initial_update(x_std=1, y_std=1, theta_std=1)</div><div class="ttdoc">AMCL初始化函数 </div><div class="ttdef"><b>Definition:</b> select_A_dox.py:506</div></div>
<div class="ttc" id="namespaceselect___a__dox_html_afd73791153a71f1fcddb1b58d87fcf6e"><div class="ttname"><a href="namespaceselect___a__dox.html#afd73791153a71f1fcddb1b58d87fcf6e">select_A_dox.amcl_process</a></div><div class="ttdeci">def amcl_process()</div><div class="ttdoc">AMCL线程 </div><div class="ttdef"><b>Definition:</b> select_A_dox.py:605</div></div>
<div class="ttc" id="namespaceselect___a__dox_html_a37dfe6ff00e8834a1d53c1612354758c"><div class="ttname"><a href="namespaceselect___a__dox.html#a37dfe6ff00e8834a1d53c1612354758c">select_A_dox.amcl_recovery</a></div><div class="ttdeci">def amcl_recovery()</div><div class="ttdoc">AMCL恢复状态过程 </div><div class="ttdef"><b>Definition:</b> select_A_dox.py:575</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a37dfe6ff00e8834a1d53c1612354758c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37dfe6ff00e8834a1d53c1612354758c">&#9670;&nbsp;</a></span>amcl_recovery()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def select_A_dox.amcl_recovery </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>AMCL恢复状态过程 </p>
<div class="fragment"><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;<span class="keyword">def </span><a class="code" href="namespaceselect___a__dox.html#a37dfe6ff00e8834a1d53c1612354758c">amcl_recovery</a>():</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="keyword">global</span> amcl_pose</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="keywordflow">if</span> flag_robot_move:</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        t = 0</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        <span class="keywordflow">while</span> t &lt; 15:</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;            time.sleep(1)</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;            <span class="keywordflow">print</span> amcl_pose.x_std, amcl_pose.y_std</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;            <span class="keywordflow">if</span> amcl_pose.x_std &gt; 0.5 <span class="keywordflow">or</span> amcl_pose.y_std &gt; 0.5:</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                t += 1</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">True</span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">False</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="keywordflow">else</span>:</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        t = 0</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        <span class="keywordflow">while</span> t &lt; 15:</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;            time.sleep(1)</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;            <a class="code" href="namespaceselect___a__dox.html#a1c4df087055bbe2cb5ce63c92a51d493">amcl_nomotion_update</a>()</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;            <span class="keywordflow">print</span> amcl_pose.x_std, amcl_pose.y_std</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;            <span class="keywordflow">if</span> amcl_pose.x_std &gt; 0.5 <span class="keywordflow">or</span> amcl_pose.y_std &gt; 0.5:</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;                t += 1</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">True</span></div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">False</span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;</div><div class="ttc" id="namespaceselect___a__dox_html_a1c4df087055bbe2cb5ce63c92a51d493"><div class="ttname"><a href="namespaceselect___a__dox.html#a1c4df087055bbe2cb5ce63c92a51d493">select_A_dox.amcl_nomotion_update</a></div><div class="ttdeci">def amcl_nomotion_update()</div><div class="ttdoc">AMCL未运动状态下粒子更新 </div><div class="ttdef"><b>Definition:</b> select_A_dox.py:565</div></div>
<div class="ttc" id="namespaceselect___a__dox_html_a37dfe6ff00e8834a1d53c1612354758c"><div class="ttname"><a href="namespaceselect___a__dox.html#a37dfe6ff00e8834a1d53c1612354758c">select_A_dox.amcl_recovery</a></div><div class="ttdeci">def amcl_recovery()</div><div class="ttdoc">AMCL恢复状态过程 </div><div class="ttdef"><b>Definition:</b> select_A_dox.py:575</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2e96d33700cc43f6769c8717a1538684"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e96d33700cc43f6769c8717a1538684">&#9670;&nbsp;</a></span>angle_diff()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def select_A_dox.angle_diff </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>角度差值 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">a</td><td>输入角度 </td></tr>
    <tr><td class="paramname">b</td><td>输入角度</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>角度差值 </dd></dl>
<div class="fragment"><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="keyword">def </span><a class="code" href="namespaceselect___a__dox.html#a2e96d33700cc43f6769c8717a1538684">angle_diff</a>(a, b):</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    a = <a class="code" href="namespaceselect___a__dox.html#a933f572519bc5396421db86a68a37916">normalize</a>(a)</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    b = <a class="code" href="namespaceselect___a__dox.html#a933f572519bc5396421db86a68a37916">normalize</a>(b)</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    d1 = a - b</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    d2 = 2 * math.pi - math.fabs(d1)</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="keywordflow">if</span> d1 &gt; 0:</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        d2 *= -1.0</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="keywordflow">if</span> math.fabs(d1) &lt; math.fabs(d2):</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        <span class="keywordflow">return</span> d1</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keywordflow">else</span>:</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <span class="keywordflow">return</span> d2</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div><div class="ttc" id="namespaceselect___a__dox_html_a2e96d33700cc43f6769c8717a1538684"><div class="ttname"><a href="namespaceselect___a__dox.html#a2e96d33700cc43f6769c8717a1538684">select_A_dox.angle_diff</a></div><div class="ttdeci">def angle_diff(a, b)</div><div class="ttdoc">角度差值 </div><div class="ttdef"><b>Definition:</b> select_A_dox.py:64</div></div>
<div class="ttc" id="namespaceselect___a__dox_html_a933f572519bc5396421db86a68a37916"><div class="ttname"><a href="namespaceselect___a__dox.html#a933f572519bc5396421db86a68a37916">select_A_dox.normalize</a></div><div class="ttdeci">def normalize(z)</div><div class="ttdoc">归一化 </div><div class="ttdef"><b>Definition:</b> select_A_dox.py:49</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3b1a91ee1ddc60fac7981f8cb5ea0368"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b1a91ee1ddc60fac7981f8cb5ea0368">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def select_A_dox.main </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>主函数 </p>
<div class="fragment"><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;<span class="keyword">def </span><a class="code" href="namespaceselect___a__dox.html#a3b1a91ee1ddc60fac7981f8cb5ea0368">main</a>():</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="keyword">global</span> tfBuffer, listener, amcl_output, amcl_init_pose, odom_pose, out_pose, pub, pub_amcl</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <span class="keywordflow">try</span>:</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        rospy.init_node(<span class="stringliteral">&#39;combined_test&#39;</span>)</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        tfBuffer = tf2_ros.Buffer()</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        listener = tf2_ros.TransformListener(tfBuffer)</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        amcl_pose = AMCL_unit()</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        amcl_output = AMCL_unit()</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        amcl_init_pose = PoseWithCovarianceStamped()</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        gps_pose = GPS_unit()</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        odom_pose = Odom_unit()</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        out_pose = SELECTED()</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        rospy.Subscriber(<span class="stringliteral">&#39;/fuse/map_odom&#39;</span>, PoseWithCovarianceStamped, amcl_pose.fix)</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        rospy.Subscriber(<span class="stringliteral">&#39;/Gnss_Odom_res&#39;</span>, Gnss_Odom_lyz, gps_pose.update)</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;        rospy.Subscriber(<span class="stringliteral">&#39;/odom&#39;</span>, Odometry, amcl_pose.update)</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        rospy.Subscriber(<span class="stringliteral">&#39;/initialpose&#39;</span>, PoseWithCovarianceStamped, amcl_initial_callback)</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        pub = rospy.Publisher(<span class="stringliteral">&#39;/fuse/tf&#39;</span>, Fuse_tf, queue_size=100)</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        pub_amcl = rospy.Publisher(<span class="stringliteral">&#39;/initialpose&#39;</span>, PoseWithCovarianceStamped, queue_size=1)</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        t1 = threading.Thread(target=make_choice)</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        t2 = threading.Thread(target=amcl_process)</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        t1.start()</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        t2.start()</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        rospy.spin()</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <span class="keywordflow">except</span> rospy.ROSInterruptException:</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;        <span class="keywordflow">pass</span></div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;</div><div class="ttc" id="namespaceselect___a__dox_html_a3b1a91ee1ddc60fac7981f8cb5ea0368"><div class="ttname"><a href="namespaceselect___a__dox.html#a3b1a91ee1ddc60fac7981f8cb5ea0368">select_A_dox.main</a></div><div class="ttdeci">def main()</div><div class="ttdoc">主函数 </div><div class="ttdef"><b>Definition:</b> select_A_dox.py:641</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0a0029d6640915baf31f3cb76c0658ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a0029d6640915baf31f3cb76c0658ab">&#9670;&nbsp;</a></span>make_choice()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def select_A_dox.make_choice </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>筛选函数 </p>
<div class="fragment"><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="keyword">def </span><a class="code" href="namespaceselect___a__dox.html#a0a0029d6640915baf31f3cb76c0658ab">make_choice</a>():</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    rate = rospy.Rate(10)</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="keywordflow">while</span> <span class="keywordflow">not</span> rospy.is_shutdown():</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        out_pose.x = amcl_output.x</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        out_pose.y = amcl_output.y</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        out_pose.theta = amcl_output.theta</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        out_pose.set_map(out_pose.x, out_pose.y, out_pose.theta)</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        <span class="comment"># sendRVIZ()</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        <a class="code" href="namespaceselect___a__dox.html#a6b1af471c24514010bab83a744995d30">sendTransform</a>(out_pose)</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        <span class="comment"># amcl_pose.lock()</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        <span class="comment"># gps_pose.lock()</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        rate.sleep()</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div><div class="ttc" id="namespaceselect___a__dox_html_a0a0029d6640915baf31f3cb76c0658ab"><div class="ttname"><a href="namespaceselect___a__dox.html#a0a0029d6640915baf31f3cb76c0658ab">select_A_dox.make_choice</a></div><div class="ttdeci">def make_choice()</div><div class="ttdoc">筛选函数 </div><div class="ttdef"><b>Definition:</b> select_A_dox.py:483</div></div>
<div class="ttc" id="namespaceselect___a__dox_html_a6b1af471c24514010bab83a744995d30"><div class="ttname"><a href="namespaceselect___a__dox.html#a6b1af471c24514010bab83a744995d30">select_A_dox.sendTransform</a></div><div class="ttdeci">def sendTransform(out_pose)</div><div class="ttdoc">发送TF(topic) </div><div class="ttdef"><b>Definition:</b> select_A_dox.py:437</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aeb9ae60d7e093e9212176c74ab48f697"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb9ae60d7e093e9212176c74ab48f697">&#9670;&nbsp;</a></span>matrix_from_theta()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def select_A_dox.matrix_from_theta </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>theta</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>角度生成旋转矩阵(2x2) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">theta</td><td>输入角度</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>输出旋转矩阵 </dd></dl>
<div class="fragment"><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="keyword">def </span><a class="code" href="namespaceselect___a__dox.html#aeb9ae60d7e093e9212176c74ab48f697">matrix_from_theta</a>(theta):</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordflow">return</span> np.array([[np.cos(theta), -np.sin(theta)], [np.sin(theta), np.cos(theta)]])</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="ttc" id="namespaceselect___a__dox_html_aeb9ae60d7e093e9212176c74ab48f697"><div class="ttname"><a href="namespaceselect___a__dox.html#aeb9ae60d7e093e9212176c74ab48f697">select_A_dox.matrix_from_theta</a></div><div class="ttdeci">def matrix_from_theta(theta)</div><div class="ttdoc">角度生成旋转矩阵(2x2) </div><div class="ttdef"><b>Definition:</b> select_A_dox.py:87</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a933f572519bc5396421db86a68a37916"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a933f572519bc5396421db86a68a37916">&#9670;&nbsp;</a></span>normalize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def select_A_dox.normalize </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>z</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>归一化 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">z</td><td>角度输入</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>角度输出(0~pi) </dd></dl>
<div class="fragment"><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="keyword">def </span><a class="code" href="namespaceselect___a__dox.html#a933f572519bc5396421db86a68a37916">normalize</a>(z):</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keywordflow">return</span> math.atan2(math.sin(z), math.cos(z))</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div><div class="ttc" id="namespaceselect___a__dox_html_a933f572519bc5396421db86a68a37916"><div class="ttname"><a href="namespaceselect___a__dox.html#a933f572519bc5396421db86a68a37916">select_A_dox.normalize</a></div><div class="ttdeci">def normalize(z)</div><div class="ttdoc">归一化 </div><div class="ttdef"><b>Definition:</b> select_A_dox.py:49</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6b1af471c24514010bab83a744995d30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b1af471c24514010bab83a744995d30">&#9670;&nbsp;</a></span>sendTransform()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def select_A_dox.sendTransform </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>out_pose</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>发送TF(topic) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">out_pose</td><td>ros输出格式数据 </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="keyword">def </span><a class="code" href="namespaceselect___a__dox.html#a6b1af471c24514010bab83a744995d30">sendTransform</a>(out_pose):</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    pub.publish(out_pose.fuse_tf)</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;</div><div class="ttc" id="namespaceselect___a__dox_html_a6b1af471c24514010bab83a744995d30"><div class="ttname"><a href="namespaceselect___a__dox.html#a6b1af471c24514010bab83a744995d30">select_A_dox.sendTransform</a></div><div class="ttdeci">def sendTransform(out_pose)</div><div class="ttdoc">发送TF(topic) </div><div class="ttdef"><b>Definition:</b> select_A_dox.py:437</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7b416b405b394ffdf3fb7ca9d91bd896"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b416b405b394ffdf3fb7ca9d91bd896">&#9670;&nbsp;</a></span>theta_from_matrix()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def select_A_dox.theta_from_matrix </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>R</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>旋转矩阵(2x2)转成角度 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">R</td><td>输入旋转矩阵</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>输出角度值 </dd></dl>
<div class="fragment"><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="keyword">def </span><a class="code" href="namespaceselect___a__dox.html#a7b416b405b394ffdf3fb7ca9d91bd896">theta_from_matrix</a>(R):</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    </div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    _R_12 = R[0, 1]</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    </div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    _R_22 = R[1, 1]</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordflow">if</span> -0.001 &lt; _R_22 &lt; 0.001 <span class="keywordflow">and</span> _R_12 &gt; 0:</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        theta = math.pi / 2</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordflow">elif</span> -0.001 &lt; _R_22 &lt; 0.001 <span class="keywordflow">and</span> _R_12 &lt; 0:</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        theta = math.pi / 2</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordflow">elif</span> 0.001 &lt;= _R_22 <span class="keywordflow">and</span> _R_12 &gt; 0:</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        theta = math.atan(_R_12 / _R_22)</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordflow">elif</span> 0.001 &lt;= _R_22 <span class="keywordflow">and</span> _R_12 &lt; 0:</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        theta = math.atan(_R_12 / _R_22)</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="keywordflow">elif</span> _R_22 &lt;= -0.001 <span class="keywordflow">and</span> _R_12 &gt; 0:</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        theta = math.atan(_R_12 / _R_22) + math.pi</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keywordflow">elif</span> _R_22 &lt;= -0.001 <span class="keywordflow">and</span> _R_12 &lt; 0:</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        theta = math.atan(_R_12 / _R_22) - math.pi</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">return</span> theta</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div><div class="ttc" id="namespaceselect___a__dox_html_a7b416b405b394ffdf3fb7ca9d91bd896"><div class="ttname"><a href="namespaceselect___a__dox.html#a7b416b405b394ffdf3fb7ca9d91bd896">select_A_dox.theta_from_matrix</a></div><div class="ttdeci">def theta_from_matrix(R)</div><div class="ttdoc">旋转矩阵(2x2)转成角度 </div><div class="ttdef"><b>Definition:</b> select_A_dox.py:101</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac19f6260515ad57d2a375614405ec33d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac19f6260515ad57d2a375614405ec33d">&#9670;&nbsp;</a></span>tran_mat44()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def select_A_dox.tran_mat44 </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>trans</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>将ros格式中的Transform数据转为矩阵(4X4) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trans</td><td>ros格式Transform数据 </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="keyword">def </span><a class="code" href="namespaceselect___a__dox.html#ac19f6260515ad57d2a375614405ec33d">tran_mat44</a>(trans):</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    trans_xyz = [trans.transform.translation.x, trans.transform.translation.y, 0]</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    trans_quat = [0, 0, trans.transform.rotation.z,</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                  trans.transform.rotation.w]</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    mat44 = np.dot(tft.translation_matrix(trans_xyz), tft.quaternion_matrix(trans_quat))</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="keywordflow">return</span> mat44</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div><div class="ttc" id="namespaceselect___a__dox_html_ac19f6260515ad57d2a375614405ec33d"><div class="ttname"><a href="namespaceselect___a__dox.html#ac19f6260515ad57d2a375614405ec33d">select_A_dox.tran_mat44</a></div><div class="ttdeci">def tran_mat44(trans)</div><div class="ttdoc">将ros格式中的Transform数据转为矩阵(4X4) </div><div class="ttdef"><b>Definition:</b> select_A_dox.py:448</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a62a8e3ea1a92df75e0ca42190f621777"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62a8e3ea1a92df75e0ca42190f621777">&#9670;&nbsp;</a></span>tran_theta_T()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def select_A_dox.tran_theta_T </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>trans</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>将ros格式中的Transform数据转为矩阵(2X2) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trans</td><td>ros格式Transform数据 </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="keyword">def </span><a class="code" href="namespaceselect___a__dox.html#a62a8e3ea1a92df75e0ca42190f621777">tran_theta_T</a>(trans):</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    </div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    _quat = [trans.transform.rotation.x, trans.transform.rotation.y,</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;             trans.transform.rotation.z,</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;             trans.transform.rotation.w]</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    </div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    _theta = tft.euler_from_quaternion(_quat)[2]</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    </div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    _T = np.array([[trans.transform.translation.x], [trans.transform.translation.y]])</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="keywordflow">return</span> _theta, _T</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div><div class="ttc" id="namespaceselect___a__dox_html_a62a8e3ea1a92df75e0ca42190f621777"><div class="ttname"><a href="namespaceselect___a__dox.html#a62a8e3ea1a92df75e0ca42190f621777">select_A_dox.tran_theta_T</a></div><div class="ttdeci">def tran_theta_T(trans)</div><div class="ttdoc">将ros格式中的Transform数据转为矩阵(2X2) </div><div class="ttdef"><b>Definition:</b> select_A_dox.py:463</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="aab650782f9bf9e653748df1ce43ba0a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab650782f9bf9e653748df1ce43ba0a3">&#9670;&nbsp;</a></span>flag_robot_move</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int select_A_dox.flag_robot_move = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>机器人是否运动标志 </p>

</div>
</div>
<a id="ae625bd87a3d659c478623a68cd8419a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae625bd87a3d659c478623a68cd8419a0">&#9670;&nbsp;</a></span>MAX_STD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int select_A_dox.MAX_STD = 999999999</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>最大的标准差 </p>

</div>
</div>
<a id="a8c2c2dd96dd9f11315bf9092c248b7f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c2c2dd96dd9f11315bf9092c248b7f6">&#9670;&nbsp;</a></span>STATIC_LIMIT_ANGULAR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float select_A_dox.STATIC_LIMIT_ANGULAR = 0.05</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>判断机器人是否运动的角度限制 </p>

</div>
</div>
<a id="a0fedd571655449b271f61079a0c85510"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fedd571655449b271f61079a0c85510">&#9670;&nbsp;</a></span>STATIC_LIMIT_LINEAR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float select_A_dox.STATIC_LIMIT_LINEAR = 0.05</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>判断机器人是否运动的速度限制 </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Jan 20 2017 10:40:59 for af_bringup by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
